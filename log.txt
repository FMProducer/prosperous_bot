(.venv) (base) PS C:\Python\prosperous_bot> pytest -v
C:\Python\prosperous_bot\.venv\Lib\site-packages\pytest_asyncio\plugin.py:217: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
================================================================= test session starts ==================================================================
platform win32 -- Python 3.11.9, pytest-8.3.5, pluggy-1.6.0
rootdir: C:\Python\prosperous_bot
configfile: pytest.ini
plugins: hypothesis-6.131.21, asyncio-0.26.0, cov-6.1.1, mock-3.14.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 27 items                                                                                                                                      

src\test_exchange_api.py .........                                                                                                                [ 33%]
tests\test_exchange.py ............                                                                                                               [ 77%]
tests\test_exchange_property.py ...                                                                                                               [ 88%]
tests\test_portfolio.py .                                                                                                                         [ 92%] 
tests\test_portfolio_property.py .                                                                                                                [ 96%] 
tests\test_rebalance.py .                                                                                                                         [100%] 

=================================================================== warnings summary =================================================================== 
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order
  C:\Python\prosperous_bot\.venv\Lib\site-packages\gate_api\rest.py:47: DeprecationWarning: HTTPResponse.getheader() is deprecated and will be removed in urllib3 v2.1.0. Instead use HTTPResponse.headers.get(name, default).
    return self.urllib3_response.getheader(name, default)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============================================================ 27 passed, 2 warnings in 3.05s ============================================================ 
(.venv) (base) PS C:\Python\prosperous_bot> pytest --cov=src --cov-report=term-missing
C:\Python\prosperous_bot\.venv\Lib\site-packages\pytest_asyncio\plugin.py:217: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
...........................                                                                                                                       [100%]
=================================================================== warnings summary ===================================================================
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order
  C:\Python\prosperous_bot\.venv\Lib\site-packages\gate_api\rest.py:47: DeprecationWarning: HTTPResponse.getheader() is deprecated and will be removed in urllib3 v2.1.0. Instead use HTTPResponse.headers.get(name, default).
    return self.urllib3_response.getheader(name, default)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
==================================================================== tests coverage ==================================================================== 
___________________________________________________ coverage: platform win32, python 3.11.9-final-0 ____________________________________________________ 

Name                         Stmts   Miss Branch BrPart  Cover   Missing
------------------------------------------------------------------------
src\config.py                   45     45      0      0     0%   1-83
src\data_loader.py              92     92     20      0     0%   1-174
src\exchange_gate.py            80      5     24      7    88%   25, 32, 101->100, 103, 108->107, 110, 115
src\futures_backtester.py      145    145     46      0     0%   11-206
src\graphs.py                   49     49      4      0     0%   4-69
src\ml_model.py                234    234     34      0     0%   3-409
src\portfolio_manager.py        24      1      6      1    93%   26->21, 37
src\rebalance_engine.py         17      0      4      1    95%   20->17
src\signal_bot.py              190    190     66      0     0%   3-267
src\signal_generator.py         28     28      8      0     0%   1-82
src\strategy.py                 26     26      0      0     0%   4-53
src\test_exchange_api.py        98      1      2      1    98%   114
src\update_distribution.py      41     41     12      0     0%   1-71
src\utils.py                    44     44      6      0     0%   3-83
------------------------------------------------------------------------
TOTAL                         1115    901    232     10    18%

2 files skipped due to complete coverage.
27 passed, 2 warnings in 3.95s
(.venv) (base) PS C:\Python\prosperous_bot> pytest -x
C:\Python\prosperous_bot\.venv\Lib\site-packages\pytest_asyncio\plugin.py:217: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
...........................                                                                                                                       [100%]
=================================================================== warnings summary =================================================================== 
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order
  C:\Python\prosperous_bot\.venv\Lib\site-packages\gate_api\rest.py:47: DeprecationWarning: HTTPResponse.getheader() is deprecated and will be removed in urllib3 v2.1.0. Instead use HTTPResponse.headers.get(name, default).
    return self.urllib3_response.getheader(name, default)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
27 passed, 2 warnings in 3.56s
(.venv) (base) PS C:\Python\prosperous_bot> pytest -vv --durations=10
C:\Python\prosperous_bot\.venv\Lib\site-packages\pytest_asyncio\plugin.py:217: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
================================================================= test session starts ==================================================================
platform win32 -- Python 3.11.9, pytest-8.3.5, pluggy-1.6.0 -- C:\Python\prosperous_bot\.venv\Scripts\python.exe
cachedir: .pytest_cache
hypothesis profile 'ci' -> suppress_health_check=(HealthCheck.function_scoped_fixture,)
rootdir: C:\Python\prosperous_bot
configfile: pytest.ini
plugins: hypothesis-6.131.21, asyncio-0.26.0, cov-6.1.1, mock-3.14.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 27 items                                                                                                                                      

src/test_exchange_api.py::TestExchangeAPI::test_cancel_all_open_orders PASSED                                                                     [  3%]
src/test_exchange_api.py::TestExchangeAPI::test_check_open_orders PASSED                                                                          [  7%] 
src/test_exchange_api.py::TestExchangeAPI::test_get_current_price PASSED                                                                          [ 11%]
src/test_exchange_api.py::TestExchangeAPI::test_get_system_time PASSED                                                                            [ 14%] 
src/test_exchange_api.py::TestExchangeAPI::test_get_wallet_balance PASSED                                                                         [ 18%] 
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order PASSED                                                                         [ 22%]
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order_with_value PASSED                                                              [ 25%] 
src/test_exchange_api.py::TestExchangeAPI::test_place_order PASSED                                                                                [ 29%]
src/test_exchange_api.py::TestExchangeAPI::test_update_time_offset PASSED                                                                         [ 33%] 
tests/test_exchange.py::test_get_system_time PASSED                                                                                               [ 37%]
tests/test_exchange.py::test_get_current_price PASSED                                                                                             [ 40%] 
tests/test_exchange.py::test_create_futures_order PASSED                                                                                          [ 44%] 
tests/test_exchange.py::test_create_spot_order PASSED                                                                                             [ 48%] 
tests/test_exchange.py::test_positions PASSED                                                                                                     [ 51%] 
tests/test_exchange.py::test_safe_call_retries PASSED                                                                                             [ 55%]
tests/test_exchange.py::test_create_spot_post_only PASSED                                                                                         [ 59%] 
tests/test_exchange.py::test_safe_call_raises PASSED                                                                                              [ 62%]
tests/test_exchange.py::test_sync_time PASSED                                                                                                     [ 66%] 
tests/test_exchange.py::test_safe_call_generic_error PASSED                                                                                       [ 70%] 
tests/test_exchange.py::test_create_spot_limit_post_only PASSED                                                                                   [ 74%]
tests/test_exchange.py::test_sync_time_skip PASSED                                                                                                [ 77%] 
tests/test_exchange_property.py::test_create_futures_order_property PASSED                                                                        [ 81%]
tests/test_exchange_property.py::test_create_spot_order_property PASSED                                                                           [ 85%]
tests/test_exchange_property.py::test_positions_property PASSED                                                                                   [ 88%]
tests/test_portfolio.py::test_get_value_distribution_usdt PASSED                                                                                  [ 92%] 
tests/test_portfolio_property.py::test_value_distribution_valid PASSED                                                                            [ 96%]
tests/test_rebalance.py::test_build_orders_pct_logic PASSED                                                                                       [100%] 

=================================================================== warnings summary =================================================================== 
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order
src/test_exchange_api.py::TestExchangeAPI::test_place_market_order
  C:\Python\prosperous_bot\.venv\Lib\site-packages\gate_api\rest.py:47: DeprecationWarning: HTTPResponse.getheader() is deprecated and will be removed in urllib3 v2.1.0. Instead use HTTPResponse.headers.get(name, default).
    return self.urllib3_response.getheader(name, default)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================================================= slowest 10 durations ================================================================= 
1.58s call     src/test_exchange_api.py::TestExchangeAPI::test_place_market_order
0.30s call     tests/test_portfolio_property.py::test_value_distribution_valid
0.21s call     tests/test_exchange.py::test_safe_call_retries
0.20s call     tests/test_exchange_property.py::test_create_futures_order_property
0.08s call     tests/test_exchange_property.py::test_create_spot_order_property
0.02s call     src/test_exchange_api.py::TestExchangeAPI::test_cancel_all_open_orders
0.01s call     src/test_exchange_api.py::TestExchangeAPI::test_check_open_orders
0.01s call     src/test_exchange_api.py::TestExchangeAPI::test_place_order
0.01s call     src/test_exchange_api.py::TestExchangeAPI::test_get_system_time
0.01s call     src/test_exchange_api.py::TestExchangeAPI::test_get_wallet_balance
============================================================ 27 passed, 2 warnings in 2.65s ============================================================ 
(.venv) (base) PS C:\Python\prosperous_bot> pytest --collect-only -q
C:\Python\prosperous_bot\.venv\Lib\site-packages\pytest_asyncio\plugin.py:217: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
src/test_exchange_api.py: 9
tests/test_exchange.py: 12
tests/test_exchange_property.py: 3
tests/test_portfolio.py: 1
tests/test_portfolio_property.py: 1
tests/test_rebalance.py: 1